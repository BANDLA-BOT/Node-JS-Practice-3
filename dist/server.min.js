"use strict";var express=require("express"),mongoose=require("mongoose"),fs=require("fs"),bcrypt=require("bcrypt"),cors=require("cors"),_require=require("body-parser"),urlencoded=_require.urlencoded,app=express();app.use(express.urlencoded({extended:!1})),app.use(express.json()),app.use(cors()),PORT=8e3;var USER=new mongoose.Schema({username:{type:String,required:[!0,"username required"]},password:{type:String,required:!0},email:{type:String,required:!0,unique:!0}}),userModel=mongoose.model("User",USER),dashboard=fs.readFileSync("./index.html","utf-8");app.post("/users",function(r,s){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r.body.password),e.prev=1,e.next=4,regeneratorRuntime.awrap(userModel.create({username:r.body.username,password:bcrypt.hashSync(r.body.password),email:r.body.email}));case 4:e.sent,s.json({status:"ok"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s.json({status:"error",error:" Duplicate email"});case 11:case"end":return e.stop()}},null,null,[[1,8]])}),app.post("/login",function(r,s){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(userModel.findOne({email:r.body.email,password:r.body.password}));case 2:e.sent?s.json({status:"okay",user:!0}):s.json({status:"Error",user:!1});case 4:case"end":return e.stop()}})}),mongoose.connect("mongodb://localhost:27017/CRUD").then(function(){console.log("Connected to DB"),app.listen(PORT,function(){console.log("Server Running on "+PORT)})}).catch(function(e){return console.log(e)});
//# sourceMappingURL=server.min.js.map
